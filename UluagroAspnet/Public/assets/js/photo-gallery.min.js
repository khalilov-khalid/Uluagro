!function(e,t){e.glisse=function(s,n){var a,r,o=this,i=e(s),l={dataName:"data-glisse-big",speed:300,changeSpeed:1e3,effect:"bounce",mobile:!1,fullscreen:!1,disablindRightClick:!1,parent:null},c=!1,p={},m=[],f=function(e){return e.attr(o.settings.dataName)||e.attr("src")};o.settings={},o.els={},o.init=function(){o.settings=e.extend({},l,n),r=i.attr("rel")||null,o.settings.mobile=!!navigator.userAgent.match(/iPhone|iPod|iPad|Android|BlackBerry|Tablet|Mobile|IEMobile|Opera Mini/i),i.on("click",function(){a=f(i),d(),h(),y(a),X(),x(),g(),e(t).keydown(function(e){"27"===e.keyCode.toString()&&u(),"39"===e.keyCode.toString()&&v("next"),"37"===e.keyCode.toString()&&v("prev")}),o.settings.disablindRightClick&&o.els.content.on("contextmenu",function(e){return!1}),o.settings.mobile&&(p={touching:!1,nx:0,oX:0,scrollX:null},t.ontouchmove=t.ontouchstart=t.ontouchend=L)})};var g=function(){var t,s,n=[];for(e('img[rel="'+r+'"]').each(function(t,s){n.push(f(e(this)))}),t=0;t<n.length;t+=1)e("<img>").attr("src",n[t]).on((s=n[t],void m.push(s)))},d=function(){i.addClass("active");var s=b("transition")+"transition",n="opacity "+o.settings.speed+"ms ease, "+b("transform")+"transform "+o.settings.speed+"ms ease";if(o.els.wrapper=e(t.createElement("div")).attr("id","glisse-wrapper"),o.els.overlay=e(t.createElement("div")).attr("id","glisse-overlay").css(s,n),o.els.spinner=e(t.createElement("div")).attr("id","glisse-spinner"),o.els.close=e(t.createElement("span")).attr("id","glisse-close").css(s,n),o.els.content=e(t.createElement("div")).attr("id","glisse-overlay-content").css(s,n).css(b("transform")+"transform","scale(0)"),o.els.controls=e(t.createElement("div")).attr("id","glisse-controls").css(s,n),o.els.controlNext=e(t.createElement("span")).attr("class","glisse-next").append(e(t.createElement("span")).html("❯").attr("class","span")),o.els.controlLegend=e(t.createElement("span")).attr("class","glisse-legend"),o.els.controlPrev=e(t.createElement("span")).attr("class","glisse-prev").append(e(t.createElement("span")).html("❮").attr("class","span")),o.els.overlay.append(o.els.spinner),o.els.controls.append(o.els.controlNext,o.els.controlLegend,o.els.controlPrev),o.els.wrapper.append(o.els.overlay,o.els.close,o.els.content,o.els.controls),e("body").append(o.els.wrapper),C.observe("glisse-overlay",function(){o.els.overlay.css("opacity",1)}),C.observe("glisse-close",function(){o.els.close.css("opacity",1)}),C.observe("glisse-controls",function(){o.els.controls.css("opacity",1)}),o.els.controls.delegate(".span","click",function(t){t.preventDefault();var s=e(this).parent().hasClass("glisse-next")?"next":"prev";v(s)}),o.els.close.on("click",function(){u()}),o.settings.fullscreen){var a=t.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()}},u=function(){o.els.content.css({opacity:0}).css(b("transform")+"transform","scale(1.2)"),o.els.overlay.css({opacity:0}),o.els.close.css({opacity:0}),o.els.controls.css({opacity:0}),setTimeout(function(){o.els.content.remove(),o.els.overlay.remove(),o.els.close.remove(),o.els.controls.remove(),o.els.wrapper.remove(),e("#glisse-transition-css").remove()},o.settings.speed),i.removeClass("active"),t.ontouchmove=function(e){return!0},t.ontouchstart=function(e){return!0},t.ontouchend=function(e){return!0},e(t).unbind("keydown"),o.settings.fullscreen&&(t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen())},y=function(t){k(!0);var s=e("<img/>",{src:t}).appendTo(o.els.content);o.els.content.css({backgroundImage:'url("'+t+'")'}),s.on("load",function(){s.remove(),k(!1),o.els.content.css({visibility:"visible",opacity:1}).css(b("transform")+"transform","scale(1)")})},v=function(t){var s=e("img["+o.settings.dataName+'="'+a+'"][rel='+r+"]"),n=e("img[rel="+r+"]").index(s),i=e("img[rel="+r+"]").length,l=!0;if((0===n&&"prev"===t||n===i-1&&"next"===t)&&(l=!1),l&&!1===c){c=!0;var p="next"===t?e("img[rel="+r+"]").eq(n+1):e("img[rel="+r+"]").eq(n-1);if(o.settings.mobile)"next"!==t?o.els.content.css(b("transform")+"transform","translateX(2000px)"):o.els.content.css(b("transform")+"transform","translateX(-2000px)");else{o.els.content.addClass("glisse-transitionOut-"+t);var g=b("transition")+"transition",d="opacity "+o.settings.speed+"ms ease, "+b("transform")+"transform "+o.settings.speed+"ms ease";o.els.content.css(g,"")}a=f(p),-1===e.inArray(a,m)&&k(!0),s.removeClass("active"),p.addClass("active"),X(),x(),setTimeout(function(){o.settings.mobile&&o.els.content.css(b("transform")+"transform","translateX(0px)").css("display","none");var s=e("<img/>",{src:a}).appendTo(o.els.content);o.els.content.css({backgroundImage:'url("'+a+'")'}),s.on("load",function(){s.remove(),-1===e.inArray(a,m)&&k(!1),o.settings.mobile&&o.els.content.css("display","block"),o.els.content.removeClass("glisse-transitionOut-"+t).addClass("glisse-transitionIn-"+t),setTimeout(function(){o.els.content.removeClass("glisse-transitionIn-"+t).css(g,d),c=!1},o.settings.changeSpeed)})},o.settings.changeSpeed)}else!1===l&&!1===c&&(o.settings.mobile&&o.els.content.css(b("transform")+"transform","translateX(0px)"),o.els.content.addClass("shake"),setTimeout(function(){o.els.content.removeClass("shake")},600))},h=function(){var s=b("transform"),n=b("animation"),a=[];switch(R(o.settings.effect)||(o.settings.effect="bounce"),o.settings.effect){case"bounce":a=["@"+n+"keyframes outLeft {","0% { "+s+"transform: translateX(0);}","20% { opacity: 1;"+s+"transform: translateX(20px);}","100% { opacity: 0;"+s+"transform: translateX(-2000px);}","}","@"+n+"keyframes inLeft {","0% {opacity: 0;"+s+"transform: translateX(-2000px);}","60% {opacity: 1;"+s+"transform: translateX(30px);}","80% {"+s+"transform: translateX(-10px);}","100% {"+s+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% {"+s+"transform: translateX(0);}","20% {opacity: 1;"+s+"transform: translateX(-20px);}","100% {opacity: 0;"+s+"transform: translateX(2000px);}","}","@"+n+"keyframes inRight {","0% {opacity: 0;"+s+"transform: translateX(2000px);}","60% {opacity: 1;"+s+"transform: translateX(-30px);}","80% {"+s+"transform: translateX(10px);}","100% {"+s+"transform: translateX(0);}","}"].join("");break;case"fadeBig":a=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+s+"transform: translateX(0);}","100% {opacity: 0;"+s+"transform: translateX(-2000px);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+s+"transform: translateX(-2000px);}","100% {opacity: 1;"+s+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+s+"transform: translateX(0);}","100% {opacity: 0;"+s+"transform: translateX(2000px);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+s+"transform: translateX(2000px);}","100% {opacity: 1;"+s+"transform: translateX(0);}","}"].join("");break;case"fade":a=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+s+"transform: translateX(0);}","100% {opacity: 0;"+s+"transform: translateX(-200px);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+s+"transform: translateX(-200px);}","100% {opacity: 1;"+s+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+s+"transform: translateX(0);}","100% {opacity: 0;"+s+"transform: translateX(200px);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+s+"transform: translateX(200px);}","100% {opacity: 1;"+s+"transform: translateX(0);}","}"].join("");break;case"roll":a=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+s+"transform: translateX(0px) rotate(0deg);}","100% {opacity: 0;"+s+"transform: translateX(-100%) rotate(-120deg);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+s+"transform: translateX(-100%) rotate(-120deg);}","100% {opacity: 1;"+s+"transform:  translateX(0px) rotate(0deg);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+s+"transform:translateX(0px) rotate(0deg);}","100% {opacity: 0;"+s+"transform:translateX(100%) rotate(120deg);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+s+"transform: translateX(100%) rotate(120deg);}","100% {opacity: 1;"+s+"transform:  translateX(0px) rotate(0deg);}","}"].join("");break;case"rotate":a=["@"+n+"keyframes outRight {","0% { opacity: 1;"+s+"transform: rotate(0deg);"+s+"transform-origin:left bottom;}","100% {opacity: 0;"+s+"transform: rotate(-90deg);"+s+"transform-origin:left bottom;}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+s+"transform: rotate(90deg);"+s+"transform-origin:left bottom;}","100% {opacity: 1;"+s+"transform: rotate(0deg);"+s+"transform-origin:left bottom;}","}","@"+n+"keyframes outLeft {","0% { opacity: 1;"+s+"transform: rotate(0deg);"+s+"transform-origin:right bottom;}","100% {opacity: 0;"+s+"transform: rotate(90deg);"+s+"transform-origin:right bottom;}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+s+"transform: rotate(-90deg);"+s+"transform-origin:right bottom;}","100% {opacity: 1;"+s+"transform: rotate(0deg);"+s+"transform-origin:right bottom;}","}"].join("");break;case"flipX":a=["@"+n+"keyframes outLeft {","0% {"+s+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","100% {"+s+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","}","@"+n+"keyframes inLeft {","0% {"+s+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","40% {"+s+"transform: perspective(400px) rotateX(-10deg);}","70% {"+s+"transform: perspective(400px) rotateX(10deg);}","100% {"+s+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","}","@"+n+"keyframes outRight {","0% {"+s+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","100% {"+s+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","}","@"+n+"keyframes inRight {","0% {"+s+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","40% {"+s+"transform: perspective(400px) rotateX(-10deg);}","70% {"+s+"transform: perspective(400px) rotateX(10deg);}","100% {"+s+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","}"].join("");break;case"flipY":a=["@"+n+"keyframes outLeft {","0% {"+s+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","100% {"+s+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","}","@"+n+"keyframes inLeft {","0% {"+s+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","40% {"+s+"transform: perspective(400px) rotateY(-10deg);}","70% {"+s+"transform: perspective(400px) rotateY(10deg);}","100% {"+s+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","}","@"+n+"keyframes outRight {","0% {"+s+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","100% {"+s+"transform: perspective(400px) rotateY(-90deg);opacity: 0;}","}","@"+n+"keyframes inRight {","0% {"+s+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","40% {"+s+"transform: perspective(400px) rotateY(-10deg);}","70% {"+s+"transform: perspective(400px) rotateY(10deg);}","100% {"+s+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","}"].join("")}var r=[".glisse-transitionOut-next {",n+"animation: "+o.settings.changeSpeed+"ms ease;",n+"animation-name: outLeft;",n+"animation-fill-mode: both;","}",".glisse-transitionIn-prev {",n+"animation: "+o.settings.changeSpeed+"ms ease;",n+"animation-name: inLeft;",n+"animation-fill-mode: both;","}",".glisse-transitionOut-prev {",n+"animation: "+o.settings.changeSpeed+"ms ease;",n+"animation-name: outRight;",n+"animation-fill-mode: both;","}",".glisse-transitionIn-next {",n+"animation: "+o.settings.changeSpeed+"ms ease;",n+"animation-name: inRight;",n+"animation-fill-mode: both;","}"].join("");t.getElementById("glisse-css")?e("#glisse-css").html(a+r):e('<style type="text/css" id="glisse-css">'+a+r+"</style>").appendTo("head")},X=function(){var t=e("img["+o.settings.dataName+'="'+a+'"]'),s=o.settings.parent?t.closest(o.settings.parent):t.parent();s.next().find("img[rel="+r+"]").length?o.els.controls.find(".glisse-next").removeClass("ended"):o.els.controls.find(".glisse-next").addClass("ended"),s.prev().find("img[rel="+r+"]").length?o.els.controls.find(".glisse-prev").removeClass("ended"):o.els.controls.find(".glisse-prev").addClass("ended")},x=function(){var t=o.els.controls.find(".glisse-legend"),s=e("img["+o.settings.dataName+'="'+a+'"]').attr("title");t.html(s||"")},k=function(e){o.els.overlay.toggleClass("loading",e)},b=function(e){for(var s=["Moz","Khtml","Webkit","O","ms"],n=t.createElement("div"),a=e.charAt(0).toUpperCase()+e.slice(1),r=s.length;r--;)if(s[r]+a in n.style)return"-"+s[r].toLowerCase()+"-";return!1},C={observe:function(e,s){var n=setInterval(function(){t.getElementById(e)&&(s(t.getElementById(e)),clearInterval(n))},60)}},R=function(t){return!!~e.inArray(t,["bounce","fadeBig","fade","roll","rotate","flipX","flipY"])},L=function(e){if("touchstart"==e.type)p.touching=!0,1==e.touches.length&&(o.els.content.css(b("transition")+"transition",""),(t=e.touches[0]).target.onclick&&t.target.onclick(),p.oX=t.pageX,p.nX=0,p.scrollX=0);else if("touchmove"==e.type){if(e.preventDefault(),p.scrollX=null,1==e.touches.length){var t=e.touches[0];p.nX=t.pageX,p.oX>p.nX?p.scrollX=-(p.oX-p.nX):p.nX>p.oX&&(p.scrollX=p.nX-p.oX),o.els.content.css(b("transform")+"transform","translateX("+p.scrollX+"px)")}}else if("touchend"==e.type||"touchcancel"==e.type){p.touching=!1;var s=b("transition")+"transition",n="opacity "+o.settings.speed+"ms ease, "+b("transform")+"transform "+o.settings.speed+"ms ease";o.els.content.css(s,n),p.scrollX>140?v("prev"):p.scrollX<-140?v("next"):o.els.content.css(b("transform")+"transform","translateX(0px)")}};o.changeEffect=function(e){R(e)&&(o.settings.effect=e,h())},o.init()},e.fn.glisse=function(t){return this.each(function(){if(void 0===e(this).data("glisse")){var s=new e.glisse(this,t);e(this).data("glisse",s)}})}}(jQuery,window.document),$(document).ready(function(){$(".glisse-image").glisse({changeSpeed:550,speed:500,effect:"bounce",fullscreen:!1})});